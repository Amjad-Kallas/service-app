{
  "access": [],
  "action": "",
  "is_model": true,
  "components": [
    {
      "label": "Elimina",
      "showValidations": false,
      "theme": "danger",
      "leftIcon": "it-delete",
      "rightIcon": "it-delete",
      "customClass": "btn-danger",
      "tableView": false,
      "modalEdit": true,
      "key": "elimina",
      "properties": {
        "modal_title": "Attenzione",
        "modal_message": "Vuoi veramente eliminare il record?",
        "btn_modal_label": "Si",
        "btn_action_type": "post",
        "url_action": "url_action"
      },
      "logic": [
        {
          "name": "delete active",
          "trigger": {
            "type": "json",
            "json": {
              "!": [
                {
                  "and": [
                    {
                      "var": [
                        "form.rec_name",
                        false
                      ]
                    },
                    {
                      "in": [
                        {
                          "var": "user.uid"
                        },
                        {
                          "var": "user.allowed_users"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          },
          "actions": [
            {
              "name": "activate button",
              "type": "property",
              "property": {
                "label": "Hidden",
                "value": "hidden",
                "type": "boolean"
              },
              "state": true
            }
          ]
        },
        {
          "name": "compute delete url",
          "trigger": {
            "type": "json",
            "json": {
              "cat": [
                "/action/delete_action",
                "/",
                {
                  "var": "form.rec_name"
                }
              ]
            }
          },
          "actions": [
            {
              "name": "update value",
              "type": "value",
              "value": "url_action"
            }
          ]
        }
      ],
      "type": "button",
      "input": true,
      "hideOnChildrenHidden": false
    },
    {
      "label": "Title",
      "tableView": true,
      "validate": {
        "required": true
      },
      "key": "title",
      "type": "textfield",
      "input": true
    },
    {
      "label": "Name",
      "validate": {
        "required": true
      },
      "key": "rec_name",
      "type": "textfield",
      "tableView": true,
      "input": true
    },
    {
      "label": "Columns",
      "columns": [
        {
          "components": [
            {
              "label": "Model",
              "widget": "choicesjs",
              "tableView": true,
              "data": {
                "values": [
                  {
                    "label": "Component",
                    "value": "component"
                  },
                  {
                    "label": "Action",
                    "value": "action"
                  },
                  {
                    "label": "Project",
                    "value": "project"
                  }
                ]
              },
              "selectThreshold": 0.3,
              "validate": {
                "onlyAvailableItems": false
              },
              "key": "model",
              "type": "select",
              "indexeddb": {
                "filter": {}
              },
              "input": true,
              "hideOnChildrenHidden": false
            }
          ],
          "width": 4,
          "offset": 0,
          "push": 0,
          "pull": 0,
          "size": "md"
        },
        {
          "components": [
            {
              "label": "Action Type",
              "widget": "choicesjs",
              "description": "Interfaccia --> sono contestuali ai form e alle liste\n| Menu --> Azioni Per Aprire link o altre Finestre\n| Copia --> crea la copia di un record",
              "tableView": false,
              "defaultValue": "menu",
              "data": {
                "values": [
                  {
                    "label": "Menu",
                    "value": "menu"
                  },
                  {
                    "label": "Window",
                    "value": "window"
                  },
                  {
                    "label": "Task",
                    "value": "task"
                  },
                  {
                    "label": "System",
                    "value": "system"
                  },
                  {
                    "label": "Save",
                    "value": "save"
                  },
                  {
                    "label": "Copy",
                    "value": "copy"
                  },
                  {
                    "label": "Delete",
                    "value": "delete"
                  },
                  {
                    "label": "Api/App",
                    "value": "apiapp"
                  },
                  {
                    "label": "Process",
                    "value": "process"
                  }
                ]
              },
              "selectThreshold": 0.3,
              "validate": {
                "required": true,
                "onlyAvailableItems": false
              },
              "key": "action_type",
              "type": "select",
              "indexeddb": {
                "filter": {}
              },
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Menu Group",
              "widget": "choicesjs",
              "tableView": true,
              "data": {
                "values": [
                  {
                    "label": "Builder",
                    "value": "builder"
                  },
                  {
                    "label": "Config",
                    "value": "config"
                  },
                  {
                    "label": "Resource",
                    "value": "resource"
                  },
                  {
                    "label": "Model",
                    "value": "model"
                  }
                ]
              },
              "selectThreshold": 0.3,
              "validate": {
                "onlyAvailableItems": false
              },
              "key": "menu_group",
              "type": "select",
              "indexeddb": {
                "filter": {}
              },
              "input": true,
              "hideOnChildrenHidden": false
            }
          ],
          "width": 4,
          "offset": 0,
          "push": 0,
          "pull": 0,
          "size": "md"
        },
        {
          "components": [
            {
              "label": "Solo Amministratore",
              "tableView": false,
              "defaultValue": false,
              "key": "admin",
              "type": "checkbox",
              "input": true,
              "hideOnChildrenHidden": false
            }
          ],
          "width": 4,
          "offset": 0,
          "push": 0,
          "pull": 0,
          "size": "md"
        }
      ],
      "key": "columns",
      "type": "columns",
      "input": false,
      "tableView": false
    },
    {
      "label": "Tabs",
      "components": [
        {
          "label": "Client Action",
          "key": "clientAction",
          "components": [
            {
              "label": "Action root path",
              "tableView": false,
              "defaultValue": "/action",
              "key": "action_root_path",
              "type": "textfield",
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Tipo Record",
              "widget": "choicesjs",
              "description": "\"Data\" ignored if model type is \"Layout\"",
              "tableView": false,
              "data": {
                "values": [
                  {
                    "label": "Schema",
                    "value": "component"
                  },
                  {
                    "label": "Data",
                    "value": "data"
                  }
                ]
              },
              "selectThreshold": 0.3,
              "validate": {
                "onlyAvailableItems": false
              },
              "key": "type",
              "type": "select",
              "indexeddb": {
                "filter": {}
              },
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Model Type",
              "widget": "choicesjs",
              "tableView": true,
              "data": {
                "values": [
                  {
                    "label": "Form",
                    "value": "form"
                  },
                  {
                    "label": "Risorsa",
                    "value": "resource"
                  },
                  {
                    "label": "Layout",
                    "value": "layout"
                  }
                ]
              },
              "selectThreshold": 0.3,
              "validate": {
                "onlyAvailableItems": false
              },
              "key": "component_type",
              "type": "select",
              "indexeddb": {
                "filter": {}
              },
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Mode",
              "widget": "choicesjs",
              "tableView": true,
              "data": {
                "values": [
                  {
                    "label": "Form",
                    "value": "form"
                  },
                  {
                    "label": "List",
                    "value": "list"
                  }
                ]
              },
              "selectThreshold": 0.3,
              "key": "mode",
              "type": "select",
              "indexeddb": {
                "filter": {}
              },
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Save on DB",
              "tableView": false,
              "defaultValue": false,
              "key": "store_data",
              "type": "checkbox",
              "input": true
            },
            {
              "label": "Builder Enabled",
              "tableView": true,
              "defaultValue": false,
              "key": "builder_enabled",
              "type": "checkbox",
              "input": true
            },
            {
              "label": "Show Context button in",
              "widget": "choicesjs",
              "customClass": "mb-2",
              "tableView": false,
              "multiple": true,
              "data": {
                "values": [
                  {
                    "label": "Form",
                    "value": "form"
                  },
                  {
                    "label": "List",
                    "value": "list"
                  }
                ]
              },
              "selectThreshold": 0.3,
              "validate": {
                "onlyAvailableItems": false
              },
              "key": "context_button_mode",
              "type": "select",
              "indexeddb": {
                "filter": {}
              },
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Contextual Button Icon",
              "defaultValue": "it-plus",
              "key": "button_icon",
              "type": "textfield",
              "tableView": true,
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Query",
              "autoExpand": false,
              "tableView": false,
              "defaultValue": "{}",
              "key": "list_query",
              "type": "textarea",
              "input": true
            }
          ]
        },
        {
          "label": "App/Api Action",
          "key": "appApiAction",
          "components": [
            {
              "label": "Call Type",
              "widget": "choicesjs",
              "description": "Post and Delete pass in body the instance of\nmodel in current action",
              "tableView": false,
              "data": {
                "values": [
                  {
                    "label": "Post",
                    "value": "post"
                  },
                  {
                    "label": "Delete",
                    "value": "delete"
                  },
                  {
                    "label": "Redirect",
                    "value": "redirect"
                  }
                ]
              },
              "selectThreshold": 0.3,
              "validate": {
                "onlyAvailableItems": false
              },
              "key": "callType",
              "type": "select",
              "indexeddb": {
                "filter": {}
              },
              "input": true
            },
            {
              "label": "Add Referer In Headers",
              "tableView": false,
              "defaultValue": false,
              "key": "add_referer",
              "type": "checkbox",
              "input": true
            },
            {
              "label": "Url",
              "tableView": false,
              "key": "url",
              "type": "textfield",
              "input": true
            },
            {
              "label": "Add Url Param \"?redirect={referer}\"",
              "tableView": false,
              "key": "addUrlParamRedirectReferer",
              "type": "checkbox",
              "input": true,
              "defaultValue": false
            },
            {
              "label": "Token Header Key",
              "key": "token_header_key",
              "type": "textfield",
              "tableView": true,
              "input": true
            },
            {
              "label": "Token",
              "autoExpand": false,
              "tableView": false,
              "key": "token",
              "type": "textarea",
              "input": true
            }
          ]
        },
        {
          "label": "Process",
          "key": "process",
          "components": [
            {
              "label": "Activate Process Task for Action ",
              "tableView": false,
              "defaultValue": false,
              "key": "eval_process",
              "type": "checkbox",
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Tenant",
              "tableView": false,
              "key": "process_tenant",
              "type": "textfield",
              "input": true
            },
            {
              "label": "Complete Process",
              "description": "Name of process to complete",
              "spellcheck": false,
              "tableView": false,
              "key": "process_name_to_complete",
              "type": "textfield",
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "Start Process",
              "description": "Name of process that you can start",
              "spellcheck": false,
              "tableView": true,
              "key": "start_process",
              "type": "textfield",
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "New Process Instance Assignee",
              "description": "Use Model: <br/>\nfor user logged \"session.user.uid\"<br/>\nfor custom model \"model_name.field_name\"",
              "key": "start_process_assignee",
              "type": "textfield",
              "tableView": true,
              "input": true
            },
            {
              "label": "Complete Task  Assignee",
              "description": "Use Model: \nfor assign task to resp of user logged,<br/>Resp function: \"session.user.resp_function\" <br/> Resp uid \"session.user.responsabile_uid\" <br/> <br/>for custom model \"model_name.field_name\"",
              "tableView": false,
              "key": "complete_task_assignee",
              "type": "textfield",
              "input": true
            }
          ]
        },
        {
          "label": "Next Action",
          "key": "nextAction",
          "components": [
            {
              "label": "Azione Successiva",
              "tableView": false,
              "key": "next_action_name",
              "logic": [
                {
                  "name": "Required in list",
                  "trigger": {
                    "type": "json",
                    "json": {
                      "==": [
                        {
                          "var": "form.data.mode"
                        },
                        "list"
                      ]
                    }
                  },
                  "actions": [
                    {
                      "name": "Required",
                      "type": "property",
                      "property": {
                        "label": "Required",
                        "value": "validate.required",
                        "type": "boolean"
                      },
                      "state": true
                    }
                  ]
                }
              ],
              "type": "textfield",
              "input": true,
              "hideOnChildrenHidden": false
            },
            {
              "label": "By Ref",
              "description": "Ref filter is field \"rec_name\" value in model handled by next_action.\nUse \"self\" if you need relation in contextual record",
              "tableView": false,
              "key": "ref",
              "type": "textfield",
              "input": true
            },
            {
              "label": "By Parent",
              "description": "Parent filter is field \"rec_name\" value in model handled by next_action.\nUse \"self\" if you need relation in contextual record",
              "tableView": false,
              "key": "parent",
              "type": "textfield",
              "input": true
            }
          ]
        }
      ],
      "key": "tabs",
      "type": "tabs",
      "input": false,
      "tableView": false
    },
    {
      "type": "button",
      "label": "Submit",
      "key": "submit",
      "disableOnInvalid": true,
      "input": true,
      "tableView": false
    }
  ],
  "deleted": 0,
  "display": "form",
  "handle_global_change": 1,
  "rec_name": "action",
  "make_virtual_model": true,
  "sys": true,
  "title": "Action Model",
  "type": "form",
  "update_uid": ""
}